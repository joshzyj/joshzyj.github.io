
  <!DOCTYPE html><meta charset=UTF-8>
  <style>.node rect{cursor:pointer;fill:#fff;fill-opacity:.5;stroke:#3182bd;stroke-width:1.5px;}
  .node text{font:10px sans-serif;pointer-events:none;}
  path.link{fill:none;stroke:#9ecae1;stroke-width:1.5px;}
  .control.glyphicon{position:static;color:#4A4C4F;font-family:"Oxygen", sans-serif;cursor:pointer;}
  .scrollbox{height: 120px;border: 1px solid #e5e5e5;overflow: scroll;}
  .bar{fill: steelblue;}.axis{font: 10px sans-serif;}.axis path,.axis line{fill: none; stroke: #000;
  shape-rendering: crispEdges;}.x.axis path{display: none;}</style>
  <link href="https://fonts.googleapis.com/css?family=Oxygen" rel=stylesheet type="text/css">
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel=stylesheet>
  <title>STM Visualization</title><body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.3/d3.min.js"></script>
  <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
  <script>var margin={top:30,right:20,bottom:30,left:20},width=window.innerWidth/1.5-margin.left-margin.right,height=window.innerHeight-margin.top-margin.bottom,barHeight=20,barWidth=width*.8;
  var i=0,duration=400,root;var tree=d3.layout.tree().nodeSize([0,20]);var diagonal=d3.svg.diagonal().projection(function(d){return[d.y,d.x];});
  var svg=d3.select("body").append("svg").attr("width",width+margin.left+margin.right).attr("height",height+margin.top+margin.bottom).append("g").attr("transform","translate("+margin.left+","+margin.top+")");
  root= {"children":[{"name":["time, york, said, student, permiss, school, new"],"children":[{"name":["state, peopl, one, citi, said, new, say"],"children":[{"name":["will, communiti, peopl, black, build, citi, resid"],"children":[{"name":["homeless, resid, apart, shelter, villag, squatter, landlord"],"size":[1800],"topic_no":[12],"thought_1":["Shelter on Staten Island Opens With OppositionNew York Times (1923-Current file); Sep 27, 1987; ProQuest Historical Newspapers: The New York Timespg. 56Shelter on Staten IslandOpens With OppositionDespite the opposition of neighbors, aprivately run t"],"thought_2":["City Gives Crotona Park Blitz CleanupBy NATHANIEL SHEPPARD Jr.New York Times (1923-Current file); Aug 2, 1973; ProQuest Historical Newspapers: The New York Timespg. 39   ‘ a me ; onPark employes installing new slats on a vandalized bench itrCrbcotta’"],"prob":["citi, resid, build, area, peopl, plan, park"],"frex":["homeless, resid, apart, shelter, villag, squatter, landlord"],"lift":["crotona, “shelter, terview, secretariat, homeless, sce, housing’"],"score":["citi, resid, build, homeless, apart, rent, park"],"proportion":["0.04"]},{"name":["boston, harlem, love, hotel, unemploy, live, communiti"],"size":[1800],"topic_no":[17],"thought_1":["Dinkins Striving to End Protests At Community Board's MeetingsBy STEVEN LEE MYERSNew York Times (1923-Current file); Mar 2, 1992; ProQuest Historical Newspapers: The New York Timespg. B2Dinkins Striving to End ProtestsAt Community Board’s MeetingsBy "],"thought_2":["Koch Answers Queries in Harlem, Then Is Shouted Down by Hecklers: ...By PETER KIHSSNew York Times (1923-Current file); Mar 5, 1979; ProQuest Historical Newspapers: The New York Timespg. Al    ‘The New York Times / Chester Higgins Jr.Mayor Koch with C"],"prob":["black, will, peopl, communiti, said, member, mayor"],"frex":["boston, harlem, love, hotel, unemploy, live, communiti"],"lift":["downtown”, “tve, bigger”, reliabl, hotel”, relinquish, commune"],"score":["black, mayor, communiti, will, peopl, live, member"],"proportion":["0.04"]}],"topic_no":[12,17]},{"name":["klan, leagu, klux, duke, women’, miss, women"],"size":[1800],"topic_no":[11],"thought_1":["Duke Recasts His Religious ClaimsBy ROBERTO SUROSpecial to The New York TimesNew York Times (1923-Current file); Nov 11, 1991; ProQuest Historical Newspapers: The New York Timespg. Al2 Blocked due to copyright.See full page image ormicrofilm. Associa"],"thought_2":["Rivals in Louisiana Intensifying Pace and Vitriol: Rivals in Louisiana Intensify VitriolBy ROBERTO SUROSpecial to The New York Times .New York Times (1923-Current file); Nov 14, 1991; ProQuest Historical Newspapers: The New York Timespg. AlRivals in "],"prob":["said, women, time, two, year, new, law"],"frex":["klan, leagu, klux, duke, women’, miss, women"],"lift":["“theolog, surospeci, examination”, elgabrowni, born-, duke’, duke"],"score":["women, klan, law, mrs, miss, said, king"],"proportion":["0.03"]},{"name":["bill, republican, senat, refuge, cuban, abort, immigr"],"size":[1800],"topic_no":[18],"thought_1":["A Century After Queen's Overthrow, Talk of Sovereignty Shakes HawaiiBy ROBERT REINHOLDSpecial to The New York TimesNew York Times (1923-Current file); Nov 8, 1992; ProQuest Historical Newspapers: The New York Timespg. 25A Century After Queen’s Overth"],"thought_2":["Governors Are Divided Over Impact of Abortion IssueBy EJ. DIONNE Jr.Special to The New York TimesNew York Times (1923-Current file); Jul 31, 1989; ProQuest Historical Newspapers: The New York Timespg. A8Governors Are Divided Over Impact of Abortion I"],"prob":["state, abort, vote, said, senat, democrat, polit"],"frex":["bill, republican, senat, refuge, cuban, abort, immigr"],"lift":["merlino, mailer, melcher, embargo, hypertens, cuban-american, gambit"],"score":["abort, state, senat, bill, republican, vote, democrat"],"proportion":["0.04"]},{"name":["said, like, say, right, american, see, one"],"children":[{"name":["think, imag, microfilm, littl, campaign, don’t, tell"],"size":[1800],"topic_no":[3],"thought_1":["Princeton Women Forge a New Era: Tradition may mar the right to belong to any eating club.Special to The New York TimesNew York Times (1923-Current file); Jan 28, 1991; ProQuest Historical Newspapers: The New York Timespg. B2Princeton Women Forge a N"],"thought_2":["The Green Movement in the Fashion World: Fashion World's Green MovementBy WOODY HOCHSWENDERNew York Times (1923-Current file); Mar 25, 1990; ProQuest Historical Newspapers: The New York Timespg. 1 The Green Movement in the Fashion WorldBy WOODY HOCHS"],"prob":["said, say, like, one, see, right, just"],"frex":["think, imag, microfilm, littl, campaign, don’t, tell"],"lift":["boutiqu, henson, sweat, clubs’, flick, “christ, hardcor"],"score":["say, like, see, don’t, said, think, right"],"proportion":["0.04"]},{"name":["gay, countri, draft, homosexu, film, volunt, lesbian"],"size":[1800],"topic_no":[6],"thought_1":["HATFIELD A BIGOT, BIRCHERS CHARGE: GOVERNOR'S G.O.P. KEYNOTE BRINGS SIBy LAWRENCE E, DAVIESSpecial to The New York Times‘New York Times (1923-Current file); Jul 15, 1964; ProQuest Historical Newspapers: The New York Timespg.22HATFIELD A BIGOT,BIRCHER"],"thought_2":["Two Film Critics Quit Festival Panel in ProtestBy LESLIE BENNETTSNew York Times (1923-Current file); Feb 5, 1988; ProQuest Historical Newspapers: The New York Timespg. C19‘Two Film Critics Quit |Festival Panel in ProtestBy LESLIE BENNETTSThe New York"],"prob":["american, day, council, countri, center, still, said"],"frex":["gay, countri, draft, homosexu, film, volunt, lesbian"],"lift":["disgusting”, ieee, bircher, taste”, gay, increa, bookstor"],"score":["american, gay, countri, homosexu, council, draft, film"],"proportion":["0.04"]}],"topic_no":[3,6]}],"topic_no":[12,17,11,18,3,6]},{"name":["said, time, student, permiss, york, new, school"],"children":[{"name":["group, last, year, also, program, said, new"],"children":[{"name":["jersey, governor, urg, program, richard, cut, art"],"size":[1800],"topic_no":[7],"thought_1":["White Plains Groups Join Nestle Protest: Baby-For mula Protest at NestleBy TESSA MELVINNew York Times (1923-Current file); Apr 16, 1978; ProQuest Historical Newspapers: The New York Timespg. 433White Plains GroupsJoin Nestlé ProtestBy TESSA MELVINWHI"],"thought_2":["White Plains Groups Join Nestle Protest: Baby-Formula <span ...By TESSA MELVINNew York Times (1923-Current file); Apr 16, 1978; ProQuest Historical Newspapers: The New York Timespg. 433White Plains GroupsJoin Nestlé ProtestBy TESSA MELVINWHITE PLAINS"],"prob":["new, program, group, public, also, committe, action"],"frex":["jersey, governor, urg, program, richard, cut, art"],"lift":["nestl, ‘thidden-persuader”, “inappropri, “switch, adequaci, baby”’, formuta"],"score":["program, committe, group, public, governor, meet, propos"],"proportion":["0.05"]},{"name":["percent, cost, aid, drug, spend, problem, health"],"size":[1800],"topic_no":[14],"thought_1":["Group Urges Doctors to Fight Malnutrition in AIDS PatientsBy GINA KOLATANew York Times (1923-Current file); Jan 20, 1989; ProQuest Historical Newspapers: The New York Timespg. A20Group Urges Doctors to FightMalnutritionin AIDS PatientsBy GINA KOLATAA"],"thought_2":["Doctors Weigh Strike Over InsuranceBy MATTHEW L. WALDSpecial to The New York TimesNew York Times (1923-Current file); Mar 9, 1986; ProQuest Historical Newspapers: The New York Timespg. 56 ‘The New York Times/Steve MillerFeeling the crunch: Dr. Garry "],"prob":["said, year, aid, new, percent, increas, servic"],"frex":["percent, cost, aid, drug, spend, problem, health"],"lift":["well-balanc, healthcar, morrisania, ‘medic, hemophiliac, carman, patient’"],"score":["percent, aid, said, increas, health, year, million"],"proportion":["0.04"]}],"topic_no":[7,14]},{"name":["suprem, court, rule, clinic, case, unconstitut, justic"],"size":[1800],"topic_no":[2],"thought_1":["HIGH COURT BA   pecial to The New York Times | |rent file); Jul 2, 1976; ProQuest Historical Newspapers: The New York Timespg. 41IGH COURT BARSGIVING A HUSBANDVETOON ABORTIONJustices Hold States MayNot Require a Woman toConsent of Spouse PARENTS ALSO"],"thought_2":["HIGH COURT BA   pecial to The New York Times | |rent file); Jul 2, 1976; ProQuest Historical Newspapers: The New York Timespg. 41IGH COURT BARSGIVING A HUSBANDVETOON ABORTIONJustices Hold States MayNot Require a Woman toConsent of Spouse PARENTS ALSO"],"prob":["court, case, rule, right, decis, law, justic"],"frex":["suprem, court, rule, clinic, case, unconstitut, justic"],"lift":["evidentiari, oelsner, lesley, rehnquist, justices’, sekulow, presumpt"],"score":["court, case, rule, suprem, justic, right, decis"],"proportion":["0.04"]},{"name":["file, prison, state, suit, said, feder, depart"],"children":[{"name":["environment, plant, mine, farm, industri, pollut, land"],"size":[1800],"topic_no":[4],"thought_1":["Judge Halts U.S. Swap of Island in Alaska RefugeNew York Times (1923-Current file); Dec 1, 1984; ProQuest Historical Newspapers: The New York Timespg. 24Judge Halts U.S. Swap of Island in Alaska Refuge)ANCHORAGE, Nov. 30 (AP) — AFederal district judg"],"thought_2":["INDIANS ASK HALT OF STRIP MINING: HOPIS FILE SUIT TO PRESERVE ARIZONA AlBy WILLIAM M. BLAIRSpecial to The New York TimesNew York Times (1923-Current file); May 15, 1971; ProQuest Historical Newspapers: The New York Timesps. 32INDIANS ASK HALTOF STRIP"],"prob":["judg, lawyer, use, oper, feder, new, plant"],"frex":["environment, plant, mine, farm, industri, pollut, land"],"lift":["reclam, dioxid, marotta, skinner, uranium, sulfur, wampanoag"],"score":["judg, plant, lawyer, environment, indian, lawsuit, land"],"proportion":["0.04"]},{"name":["inmat, prison, employ, agenc, discrimin, suit, cell"],"size":[1800],"topic_no":[5],"thought_1":["Magistrate Delays NBC Pact With Women EmployeesNew York Times (1923-Current file); Feb 24, 1977; ProQuest Historical Newspapers: The New York Timespg. 71Magistrate Delays NBC Pact With Women Employeesi i .|$200,000 appeared to be a “bonus” forA Feder"],"thought_2":["Rail Carrier Settles Lawsuit on Discrimination ;New York Times (1923-Current file); Nov 10, 1983; ProQuest Historical Newspapers: The New York Timespg. A24Rail Carrier Settles Lawsuit on DiscriminationWASHINGTON, Nov. 9 (AP) — Burlington Northern Inc"],"prob":["state, said, suit, depart, prison, york, charg"],"frex":["inmat, prison, employ, agenc, discrimin, suit, cell"],"lift":["lasker, dungeon, engrav, résumé, cellblock, nicotin, wiretap"],"score":["prison, suit, inmat, state, depart, discrimin, charg"],"proportion":["0.05"]}],"topic_no":[4,5]},{"name":["said, board, school, univers, student, colleg, educ"],"children":[{"name":["pupil, school, elementari, board’, teacher, board, schoo"],"size":[1800],"topic_no":[8],"thought_1":["Brooklyn Parents Protest a Busing PlanBy M.S. HANDLERNew York Times (1923-Current file); May 18, 1971; ProQuest Historical Newspapers: The New York Timespg. 42Brooklyn Parents Protest a Busing PlanParents boycotted PublicSchool 179 in the Parkville s"],"thought_2":["Queens Board Shouted Down In Dispute on Shimer SchoolNew York Times (1923-Current fle); Mar 2, 1971; ProQuest Historical Newspapers: The New York Timesps. 40Queens Board Shouted DownIn Dispute on Shimer SchoolA meeting of the District 28School Board "],"prob":["school, board, educ, teacher, parent, high, children"],"frex":["pupil, school, elementari, board’, teacher, board, schoo"],"lift":["-util, ‘scribner, “neighborhood”, anker, day—, desire, fourth-grad"],"score":["school, teacher, board, pupil, parent, educ, children"],"proportion":["0.05"]},{"name":["campus, faculti, colleg, college’, jeffri, undergradu, university’"],"size":[1800],"topic_no":[10],"thought_1":["20 NEGROES STAGE A COLUMBIA SIT-IN: OCCUPY ADMISSIONS OFFICE TO BACK ...By SYLVAN FOXNew York Times (1923-Current file); Apr 15, 1969; ProQuest Historical Newspapers: The New York Timespg. 1 The New York Times (by Don Hogan Charles}OCCUPATION AT COLU"],"thought_2":["300 Students Seize Building at Harvard And Eject 9 Deans: 300 Students Seize Harvard BuildingBy ROBERT REINHOLDSpecial to The New York TimesNew York Times (1923-Current file); Apr 10, 1969; ProQuest Historical Newspapers: The New York Timespg. 1 Asso"],"prob":["student, univers, colleg, campus, said, black, faculti"],"frex":["campus, faculti, colleg, college’, jeffri, undergradu, university’"],"lift":["‘afro-american, ‘faculti, ‘radic, “campus, adel, africanamerican, anthropolog"],"score":["student, campus, colleg, univers, faculti, black, professor"],"proportion":["0.05"]}],"topic_no":[8,10]},{"name":["fare, bus, transit, coast, tower, mta, boat"],"size":[1800],"topic_no":[15],"thought_1":["Enterprise Sails for Vietnam Despite a Protest Blockade .New York Times (1923-Current fle); Sep 13, 1972; ProQuest Historical Newspapers: The New York Timespg. 12Enterprise Sails for VietnamDespite a Protest Blockade  ALAMEDA, Calif., Sept. 12(UPI) —"],"thought_2":["Navy Launches a Submarine Amid ProtestNew York Times (1923-Current file); Sep 10, 1989; ProQuest Historical Newspapers: The New York Timespg. 45Navy Launches a SubmarineNEW LONDON, Conn., Sept. 9 (AP)— The Navy launched its newest Trident submarine t"],"prob":["new, york, hous, time, said, permiss, yesterday"],"frex":["fare, bus, transit, coast, tower, mta, boat"],"lift":["polari, polaris-fir, thame, mta, turnstil, aril, suffic"],"score":["hous, yesterday, york, new, project, time, permiss"],"proportion":["0.05"]},{"name":["permiss, nation, york, time, newspap, new, group"],"children":[{"name":["moon, bishop, priest, church, tuna, unif, olymp"],"size":[1800],"topic_no":[1],"thought_1":["Group Bids Pilots Refuse To Bomb in CambodiaNew York Times (1923-Current filey; May 26, 1973; ProQuest Historical Newspapers: The New York TimespedGroup Bids Pilots RefuseTo Bomb in CambodiaClergy and Laity Concerned,a religious peace group, hasasked"],"thought_2":["TOP REFORM RABBI LASHES AT CRITICS: REBUKES THOSE ORTHODOX JEWS WH(By JOSEPH BERGER‘New York Times (1923-Current file); Nov 3, 1985; ProQuest Historical Newspapers: The New York Timespg. 38TOP REFORM RABBILASHES AT CRITICSRebukes Those Orthodox JewsW"],"prob":["church, said, nuclear, bomb, jewish, rev, cathol"],"frex":["moon, bishop, priest, church, tuna, unif, olymp"],"lift":["suspen, ‘tis, dresner, myung, unif, “dialogu, moon"],"score":["church, nuclear, bomb, jewish, cathol, bishop, rev"],"proportion":["0.04"]},{"name":["union, embassi, confer, reagan, news, labor, philadelphia"],"size":[1800],"topic_no":[13],"thought_1":["Impeachment Supported‘New York Times (1923-Current file); Nov 1, 1973; ProQuest Historical Newspapers: The New York Timesps.30Impeachment SupportedAccusing President Nixon ofa “contempt for law and theadministration of justice \\unknown since the foun"],"thought_2":["100 Marching on U.N.New York Times (1923-Current file); Aug 2, 1970; ProQuest Historical Newspapers: The New York Timespe. 45100 Marching on U.N.SALISBURY, Md., Aug 1(UPI) — About 100 persons,mostly blacks, began a 300-mile,45-day march today to theU"],"prob":["new, york, time, permiss, nation, newspap, group"],"frex":["union, embassi, confer, reagan, news, labor, philadelphia"],"lift":["thurmond, pretoria, strom, angola, urer, poltic, seafar"],"score":["york, new, time, union, nation, permiss, organ"],"proportion":["0.09"]}],"topic_no":[1,13]}],"topic_no":[7,14,2,4,5,8,10,15,1,13]}],"topic_no":[12,17,11,18,3,6,7,14,2,4,5,8,10,15,1,13]},{"name":["shot, beat, beaten, assault, wound, investig, murder"],"size":[1800],"topic_no":[16],"thought_1":["SELF-DEFENSE PLEA FOR MIAMI OFFICER: LAWYER CONTENDS '82 SHOOTING OFSpecial to The New York TimesNew York Times (1923-Current file); Jan 31, 1984; ProQuest Historical Newspapers: The New York Timespg. Al0SELF-DEFENSE PLEAFOR MIAMI OFFICERLawyer Conte"],"thought_2":["3 BLACKS CONVICTED OF MURDER IN MIAMI: FOURTH YOUTH IS FREED IN ...New York Times (1923-Current fle); Feb 7, 1981; ProQuest Historical Newspapers: The New York Times8 BLACKS CONVICTEDOF MURDER IN MIAMIFourth Youth Is Freed in Deaths of3 Whites Beaten"],"prob":["said, black, offic, polic, white, two, incid"],"frex":["shot, beat, beaten, assault, wound, investig, murder"],"lift":["jermain, colombian-born, briefcas, high-publ, motorcylist, nevel, thecas"],"score":["black, polic, offic, said, incid, jail, riot"],"proportion":["0.06"]},{"name":["negro, mississippi, natchez, core, ap—, birmingham, tuskege"],"size":[1800],"topic_no":[19],"thought_1":["Carolina Sit-In Is StagedNew York Times (1923-Curfent file); Dec 14, 1960; ProQuest Historical Newspapers: The New York Times| Carolina Sit-In Is Staged: COLUMBIA, 8. C.,, Dec, 13(AP)—Ten college-age Negroesstaged a sit-in at the lunchcounter of McCr"],"thought_2":["8 Ministers Are Jailed in Sit-In At Atlanta Terminal RestaurantNew York Times (1923-Current fle); Feb 16, 1961; ProQuest Historical Newspapers: The New York Timespe. 228 Ministers Are Jailed in Sit-In |AtAtlantaTerminal RestaurantReproduced with perm"],"prob":["negro, white, time, new, york, permiss, racial"],"frex":["negro, mississippi, natchez, core, ap—, birmingham, tuskege"],"lift":["upi—negro, upi—f, natchez, ap—ten, macon, buford, ap—two"],"score":["negro, white, picket, racial, time, york, permiss"],"proportion":["0.09"]},{"name":["demonstr, march, ralli, protest, street, arrest, polic"],"children":[{"name":["youth, gang, tear, hurl, avenu, disord, pelt"],"size":[1800],"topic_no":[9],"thought_1":["Arrest of 2 Starts Disturbance by 100 In Brooklyn Area .New York Times (1923-Current file); Jul 28, 1971; ProQuest Historical Newspapers: The New York Timespg.22Arrest of 2 Starts\" Disturbance by 100In Brooklyn AreaThe arrest of two burglarysuspects "],"thought_2":["POLICEMEN PELTED IN EAST SIDE MELEE‘New York Times (1923-Current file); Jun 19, 1972; ProQuest Historical Newspapers: The New York Timesps.19POLICEMEN PELTEDIN EAST SIDE MELEEAbout 150 irate residents ofa Lower East Side neighborhood yesterday rained"],"prob":["polic, street, avenu, youth, arrest, fire, two"],"frex":["youth, gang, tear, hurl, avenu, disord, pelt"],"lift":["nonfat, hoboken, fraunc, stoop, icad, hears, fuerza"],"score":["polic, street, arrest, avenu, youth, fire, puerto"],"proportion":["0.06"]},{"name":["marcher, parad, ralli, chant, march, demonstr, barricad"],"size":[1800],"topic_no":[20],"thought_1":["750 IN RALLY HERE TO PROTEST WAeee AR: MARCH OUTSIDE UN. MISSION --ASSAIL ...New York Times (1923-Current fle); Feb 6, 1966; ProQuest Historical Newspapers: The New York Times750 IN RALLY HERETO PROTEST WARMarch Outside U.N. Mission—Assail Vietnam Bo"],"thought_2":["750 IN RALLY HERE TO PROTEST WAeee AR: MARCH OUTSIDE UN. MISSION --ASSAIL ...New York Times (1923-Current fle); Feb 6, 1966; ProQuest Historical Newspapers: The New York Times750 IN RALLY HERETO PROTEST WARMarch Outside U.N. Mission—Assail Vietnam Bo"],"prob":["demonstr, protest, march, arrest, ralli, front, sever"],"frex":["marcher, parad, ralli, chant, march, demonstr, barricad"],"lift":["—assail, brothers—g, homie’”, custedi, arlo, livermor, “face"],"score":["demonstr, protest, arrest, march, ralli, marcher, picket"],"proportion":["0.07"]}],"topic_no":[9,20]}],"topic_no":[12,17,11,18,3,6,7,14,2,4,5,8,10,15,1,13,16,19,9,20],"name":["STM Model"],"this_root":[true],"summary":["A topic model with 20 topics, 2000 documents and a 17936 word dictionary."],"proportions":[0.0361,0.0419,0.0413,0.0412,0.054,0.038,0.0451,0.0454,0.0566,0.054,0.0332,0.0428,0.0885,0.0401,0.0529,0.0565,0.0435,0.0354,0.0866,0.0669]}
 
 root.x0=0;root.y0=0;update(root);function update(source){var nodes=tree.nodes(root);var height=Math.max(500,nodes.length*barHeight+margin.top+margin.bottom);
  d3.select("svg").transition().duration(duration).attr("height",height);d3.select(self.frameElement).transition().duration(duration).style("height",height+"px");nodes.forEach(function(n,i){n.x=i*barHeight;});
  var node=svg.selectAll("g.node").data(nodes,function(d){return d.id||(d.id=++i);});
  var nodeEnter=node.enter().append("g").attr("class",function(d){if(d.size){return"node leaf"}else{return"node noleaf"}}).attr("transform",function(d){return"translate("+source.y0+","+source.x0+")";}).style("opacity",1e-6);
  nodeEnter.append("rect").data(nodes).attr("y",-barHeight/2).attr("height",barHeight).attr("width",barWidth).style("fill",color).on("click",clickModal);nodeEnter.append("text").attr("dy",3.5).attr("dx",5.5).text(function(d){if (d.children){return d.name;}else{return d.topic_no + ": " + d.name;}});
  d3.selectAll("g.noleaf").append("svg:foreignObject").attr("width",20).attr("height",20).attr("y","-10px").attr("x",barWidth-15).append("xhtml:span").attr("class","control glyphicon glyphicon-minus").attr("width","30").on("click",function(d){click(d);});
  nodeEnter.transition().duration(duration).attr("transform",function(d){return"translate("+d.y+","+d.x+")";}).style("opacity",1);node.transition().duration(duration).attr("transform",function(d){return"translate("+d.y+","+d.x+")";}).style("opacity",1).select("rect").style("fill",color);
  node.exit().transition().duration(duration).attr("transform",function(d){return"translate("+source.y+","+source.x+")";}).style("opacity",1e-6).remove();
  var link=svg.selectAll("path.link").data(tree.links(nodes),function(d){return d.target.id;});link.enter().insert("path","g").attr("class","link").attr("d",function(d){var o={x:source.x0,y:source.y0};return diagonal({source:o,target:o});}).transition().duration(duration).attr("d",diagonal);
  link.transition().duration(duration).attr("d",diagonal);link.exit().transition().duration(duration).attr("d",function(d){var o={x:source.x,y:source.y};return diagonal({source:o,target:o});}).remove();nodes.forEach(function(d){d.x0=d.x;d.y0=d.y;});}
  function click(d){if(d.children){d._children=d.children;d.children=null;}else{d.children=d._children;d._children=null;}update(d);}
  function color(d){return d._children?"#3182bd":d.children?"#c6dbef":"#fd8d3c";}
  function clickModal(d){if(d.size){$("#doc1").text(d.thought_1);$("#doc2").text(d.thought_2);$("#high-prob").text("Highest Probability: "+d.prob);$("#topicModalLabel").text("Topic "+d.topic_no+" Information");$("#frex").text("FREX: "+d.frex);$("#lift").text("Lift: "+d.lift);
  $("#score").text("Score: "+d.score);$("#proportion").text(""+d.proportion);$("#modelBody").hide();$("#clusterBody").hide();$("#topicBody").show();$("#topicModal").modal("show");}else if(d.this_root){$("#topicModalLabel").text("Fitted Model Information");$("#mod1-text").text(d.summary);$("#topicBody").hide();
  $("#clusterBody").hide();$("#modelBody").show();$("#topicModal").modal("show");if ($("#barchartDiv").children().length == 2){proportionChart();}}else{$("#topicModalLabel").text("Cluster Information");$("#clust1-text").text("This cluster comprises topics "+d.topic_no.join(", ")+".");$("#topicBody").hide();$("#modelBody").hide();
  $("#clusterBody").show();$("#topicModal").modal("show");}} function proportionChart(){for(var t=window.innerHeight/3.5,a=window.innerWidth/2.5,r=35,e=35,n=root.proportions.length,o=[.5];o.length<n;)o.push(o[o.length]+1);var i=d3.select("#barchartDiv").append("svg").attr({width:a,height:t,style:"display: block; margin: auto;"}),
  l=d3.scale.linear().domain([0,d3.max(root.proportions)]).range([0,t-r]),s=d3.scale.linear().domain([0,n]).range([0,a-e]),d=d3.scale.linear().domain([0,d3.max(root.proportions)]).range([t-r,0]),p=d3.svg.axis().scale(d).orient("left"),c=d3.svg.axis().scale(s).orient("bottom").tickValues(d3.range(.5,n+.5,1));
  i.selectAll("rect").data(root.proportions).enter().append("rect").attr({x:function(t,r){return r*(a-e)/n+e},y:function(a){return t-l(a)-r},width:(a-e)/n-1,height:l,fill:"orange"}),
  i.append("g").attr({"class":"axis",transform:"translate("+e+","+(t-r)+")"}).call(c),i.append("g").attr({"class":"axis",transform:"translate("+e+")"}).call(p),i.append("text").attr("class","x label").attr("text-anchor","middle").attr("x",a/2).attr("y",t-6).text("Topic")}</script>
  <div class="modal fade" id="topicModal" tabindex="-1" role="dialog" aria-labelledby="topicModalLabel" aria-hidden="true">
  <div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="topicModalLabel">Topic Information</h4></div>
  <div class="modal-body" id="topicBody"><h5>Top Words</h5><ul id="word-list"><li id="high-prob">Highest Probability: </li><li id="frex">FREX: </li><li id="lift">Lift: </li><li id="score">Score: </li></ul><hr><h5>Representative Documents</h5>
  <div id="doc1" class="modal-body scrollbox"></div>
  <br><div id="doc2" class="modal-body scrollbox"></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Close</button></div></div><div class="modal-body" id="modelBody"><h5>Summary</h5><span id="mod1-text"></span><hr><div id="barchartDiv">
  <h5>Topic Proportions in Corpus</h5><br></div><br><div class="modal-footer">
  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button></div></div><div class="modal-body" id="clusterBody"><h5>Summary</h5><span id="clust1-text"></span><br><br><div class="modal-footer">
  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button></div></div></div></div></body>
